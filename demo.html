<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>HelloWorld</title>
    <meta name="viewport"
          content="width=device-width,initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"/>
</head>
<body>

<script>
    var run = function (){
        var requestAnimationFrame = window["requestAnimationFrame"] || window["webkitRequestAnimationFrame"] ||
                window["mozRequestAnimationFrame"] || window["oRequestAnimationFrame"] || window["msRequestAnimationFrame"];
        if(true){
            requestAnimationFrame = function (callback) {
                return window.setTimeout(callback, 1000/60);
            };
        }

        var time = Date.now();
        var _tick = 0;
        var _maxDeltaTime = 1000;
        var _totalDeltaTime = 0;
        var frameStr = "";

        var loop = function (){
            _tick++;
            var now = Date.now();
            _totalDeltaTime += now - time;
            time = now;
            if(_totalDeltaTime > _maxDeltaTime){
                frameStr = Math.floor(_tick * 1000 / _totalDeltaTime).toString();
                console.log("FPS: "+frameStr);
                _tick = 0;
                _totalDeltaTime = 0;
            }
            
            requestAnimationFrame(loop);
        };

        /*
        end: function () {

            frames ++;
            var time = ( performance || Date ).now();

            var MSValue=time - beginTime;
            if ( time > prevTime + 1000 ) {
                var fpsValue=( frames * 1000 ) / ( time - prevTime );
                fpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );
                if(fpsValue>1){
                    if(fpsValue>60){
                        fpsValue=60;
                    }
                    console.log("FPS:"+fpsValue.toFixed(0));
                    console.log("MS:"+MSValue.toFixed(0));
                }
        */


        loop();
    };

    setTimeout(run,1000);
</script>

</body>
</html>
